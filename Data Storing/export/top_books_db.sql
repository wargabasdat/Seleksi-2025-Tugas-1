/*M!999999\- enable the sandbox mode */ 
-- MariaDB dump 10.19-11.4.5-MariaDB, for Win64 (AMD64)
--
-- Host: localhost    Database: books_db
-- ------------------------------------------------------
-- Server version	11.4.5-MariaDB

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*M!100616 SET @OLD_NOTE_VERBOSITY=@@NOTE_VERBOSITY, NOTE_VERBOSITY=0 */;

--
-- Table structure for table `author`
--

DROP TABLE IF EXISTS `author`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `author` (
  `author_id` int(11) NOT NULL AUTO_INCREMENT,
  `author_name` varchar(255) NOT NULL,
  PRIMARY KEY (`author_id`)
) ENGINE=InnoDB AUTO_INCREMENT=97 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `author`
--

LOCK TABLES `author` WRITE;
/*!40000 ALTER TABLE `author` DISABLE KEYS */;
INSERT INTO `author` VALUES
(1,'Albert Camus'),
(2,'Aldous Huxley'),
(3,'Alexandre Dumas'),
(4,'Anne Frank'),
(5,'Antoine de Saint-Exupéry'),
(6,'Anton Chekhov'),
(7,'Boris Pasternak'),
(8,'Bram Stoker'),
(9,'Carson McCullers'),
(10,'Charles Dickens'),
(11,'Charlotte Brontë'),
(12,'Chinua Achebe'),
(13,'Daniel Defoe'),
(14,'Dante Alighieri'),
(15,'Daphne du Maurier'),
(16,'Doris May Lessing'),
(17,'E. B. White'),
(18,'E. M. Forster'),
(19,'Edgar Allan Poe'),
(20,'Edith Wharton'),
(21,'Emily Brontë'),
(22,'Erich Maria Remarque'),
(23,'Ernest Hemingway'),
(24,'F. Scott Fitzgerald'),
(25,'Ford Madox Ford'),
(26,'Frank Herbert'),
(27,'Franz Kafka'),
(28,'Fyodor Dostoevsky'),
(29,'Gabriel García Márquez'),
(30,'Geoffrey Chaucer'),
(31,'George Eliot'),
(32,'George Orwell'),
(33,'Giuseppe Tomasi di Lampedusa'),
(34,'Gustave Flaubert'),
(35,'Günter Grass'),
(36,'Harper Lee'),
(37,'Henry David Thoreau'),
(38,'Henry James'),
(39,'Herman Melville'),
(40,'Homer'),
(41,'J. D. Salinger'),
(42,'J. R. R. Tolkien'),
(43,'Jack Kerouac'),
(44,'James Joyce'),
(45,'Jane Austen'),
(46,'Johann Wolfgang von Goethe'),
(47,'John Steinbeck'),
(48,'Jonathan Swift'),
(49,'Jorge Luis Borges'),
(50,'Joseph Conrad'),
(51,'Joseph Heller'),
(52,'Kurt Vonnegut'),
(53,'Laurence Sterne'),
(54,'Leo Tolstoy'),
(55,'Lewis Carroll'),
(56,'Louis-Ferdinand Céline'),
(57,'Louisa May Alcott'),
(58,'Malcolm Lowry'),
(59,'Marcel Proust'),
(60,'Margaret Mitchell'),
(61,'Mark Twain'),
(62,'Mary Shelley'),
(63,'Michel de Montaigne'),
(64,'Miguel de Cervantes'),
(65,'Mikhail Bulgakov'),
(66,'Milan Kundera'),
(67,'Nathaniel Hawthorne'),
(68,'Nikolai Gogol'),
(69,'Oscar Wilde'),
(70,'Ralph Ellison'),
(71,'Raymond Chandler'),
(72,'Richard Wright'),
(73,'Robert Louis Stevenson'),
(74,'Robert Musil'),
(75,'Salman Rushdie'),
(76,'Samuel Beckett'),
(77,'Sophocles'),
(78,'Stendhal'),
(79,'Sylvia Plath'),
(80,'T. S. Eliot'),
(81,'Thomas Hardy'),
(82,'Thomas Mann'),
(83,'Toni Morrison'),
(84,'Truman Capote'),
(85,'Unknown'),
(86,'Victor Hugo'),
(87,'Virgil'),
(88,'Virginia Woolf'),
(89,'Vladimir Nabokov'),
(90,'Voltaire'),
(91,'Walt Whitman'),
(92,'William Faulkner'),
(93,'William Golding'),
(94,'William Makepeace Thackeray'),
(95,'William Shakespeare'),
(96,'Zora Neale Hurston');
/*!40000 ALTER TABLE `author` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `book`
--

DROP TABLE IF EXISTS `book`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `book` (
  `book_id` int(11) NOT NULL AUTO_INCREMENT,
  `rank` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `year` int(11) NOT NULL,
  `pages` varchar(255) NOT NULL,
  `avg_rating` float NOT NULL,
  `type_id` int(11) NOT NULL,
  `length_id` int(11) NOT NULL,
  `author_id` int(11) NOT NULL,
  `country_id` int(11) NOT NULL,
  PRIMARY KEY (`book_id`),
  KEY `type_id` (`type_id`),
  KEY `length_id` (`length_id`),
  KEY `author_id` (`author_id`),
  KEY `country_id` (`country_id`),
  CONSTRAINT `book_ibfk_1` FOREIGN KEY (`type_id`) REFERENCES `type` (`type_id`) ON UPDATE CASCADE,
  CONSTRAINT `book_ibfk_2` FOREIGN KEY (`length_id`) REFERENCES `length` (`length_id`) ON UPDATE CASCADE,
  CONSTRAINT `book_ibfk_3` FOREIGN KEY (`author_id`) REFERENCES `author` (`author_id`) ON UPDATE CASCADE,
  CONSTRAINT `book_ibfk_4` FOREIGN KEY (`country_id`) REFERENCES `country` (`country_id`) ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=121 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `book`
--

LOCK TABLES `book` WRITE;
/*!40000 ALTER TABLE `book` DISABLE KEYS */;
INSERT INTO `book` VALUES
(1,1,'Ulysses',1922,'730-1000',3.8,1,1,44,12),
(2,2,'In Search of Lost Time',1913,'3000-4300',4.2,1,5,59,8),
(3,3,'The Great Gatsby',1925,'47-180',4,1,6,24,1),
(4,4,'The Catcher in the Rye',1951,'220-277',3.9,1,4,41,1),
(5,5,'One Hundred Years of Solitude',1967,'300-500',4.3,1,3,29,5),
(6,6,'Nineteen Eighty Four',1949,'300-400',4.4,1,2,32,4),
(7,7,'Moby-Dick',1851,'600-700',3.9,1,1,39,1),
(8,8,'The Sound and the Fury',1929,'320',4,1,2,92,1),
(9,9,'Don Quixote',1605,'800-1000',4.3,1,1,64,19),
(10,10,'Anna Karenina',1877,'800-1000',4.2,1,1,54,18),
(11,11,'Crime and Punishment',1866,'430-600',4.5,1,1,28,18),
(12,13,'Pride and Prejudice',1813,'432',4.2,1,3,45,4),
(13,12,'War and Peace',1869,'1225-1500',4.4,1,5,54,18),
(14,14,'Lolita',1955,'300-400',4.1,1,2,89,1),
(15,15,'Wuthering Heights',1847,'300-400',3.9,1,2,21,4),
(16,16,'The Lord of the Rings',1954,'1000-1500',4.5,1,5,42,4),
(17,17,'To Kill a Mockingbird',1960,'281-500',4.4,1,3,36,1),
(18,18,'The Bible',-1400,'1200-1600',4.2,4,5,85,14),
(19,19,'The Brothers Karamazov',1880,'700-800',4.5,1,1,28,18),
(20,20,'Adventures of Huckleberry Finn',1884,'200-400',3.7,1,2,61,1),
(21,21,'The Trial',1925,'200-300',3.9,1,4,27,6),
(22,22,'The Stranger',1942,'120-160',4.1,1,6,1,8),
(23,23,'Madame Bovary',1857,'300-450',4.1,1,3,34,8),
(24,24,'The Odyssey',-740,'300-500',4.1,3,3,40,10),
(25,25,'The Grapes of Wrath',1939,'464',4.4,1,3,47,1),
(26,26,'The Magic Mountain',1924,'700-1000',3.9,1,1,82,9),
(27,27,'The Divine Comedy',1308,'300-500',3.9,3,3,14,13),
(28,28,'To the Lighthouse',1927,'200-300',3.8,1,4,88,4),
(29,29,'Jane Eyre',1847,'300-500',4.2,1,3,11,4),
(30,30,'Middlemarch',1871,'700-900',4.1,1,1,31,4),
(31,31,'Heart of Darkness',1899,'70-200',3.6,1,6,50,4),
(32,32,'Alice\'s Adventures in Wonderland',1865,'92-202',3.9,1,6,55,4),
(33,33,'Invisible Man',1952,'200-600',4,1,3,70,1),
(34,34,'The Master and Margarita',1967,'250-500',4.3,1,3,65,18),
(35,35,'Catch-22',1961,'450-550',4.1,1,3,51,1),
(36,36,'Mrs. Dalloway',1925,'150-200',3.5,1,4,88,4),
(37,37,'The Iliad',-750,'300-700',3.9,3,3,40,10),
(38,38,'Les Misérables',1862,'1200-1500',4.4,1,5,86,8),
(39,39,'Great Expectations',1860,'500-600',3.9,1,1,10,4),
(40,40,'On the Road',1957,'310',3.5,1,2,43,1),
(41,41,'The Red and the Black',1830,'300-500',4,1,3,78,8),
(42,42,'Frankenstein',1818,'280-320',4.2,1,2,62,4),
(43,43,'Absalom, Absalom!',1936,'300-400',4.1,1,2,92,1),
(44,44,'Fictions',1944,'174',4.3,1,4,49,2),
(45,45,'The Little Prince',1943,'93-96',4.1,1,6,5,8),
(46,46,'One Thousand and One Nights',800,'800-1000',4.3,1,1,85,15),
(47,47,'Journey to the End of The Night',1932,'400-600',4.1,1,3,56,8),
(48,48,'David Copperfield',1849,'600-900',4,1,1,10,4),
(49,49,'Brave New World',1932,'200-300',3.8,1,4,2,4),
(50,50,'The Old Man and the Sea',1952,'120-140',3.8,1,6,23,1),
(51,51,'Lord of the Flies',1954,'224',3.8,1,4,93,4),
(52,53,'Beloved',1987,'275-350',4,1,2,83,1),
(53,52,'Gone With the Wind',1936,'959-1037',4.4,1,1,60,1),
(54,54,'Animal Farm',1945,'50-150',4.1,1,6,32,4),
(55,55,'The Idiot',1869,'600-800',4,1,1,28,18),
(56,56,'Under the Volcano',1947,'300-400',3.5,1,2,58,4),
(57,57,'Dracula',1897,'398',3.8,1,3,8,4),
(58,58,'The Life And Opinions Of Tristram Shandy',1759,'500-600',4.1,1,1,53,4),
(59,59,'The Leopard',1958,'200-300',4.1,1,4,33,13),
(60,60,'The Golden Notebook',1962,'576-640',3.4,1,1,16,4),
(61,61,'The Sun Also Rises',1926,'200-300',3.9,1,4,23,1),
(62,62,'Things Fall Apart',1958,'200-250',3.8,1,4,12,16),
(63,63,'Gulliver\'s Travels',1726,'300-400',3.5,1,2,48,4),
(64,64,'Rebecca',1938,'300-400',4.4,1,2,15,4),
(65,66,'The Aeneid',-19,'395',3.9,3,3,87,17),
(66,65,'Leaves of Grass',1855,'95-438',4,3,2,91,1),
(67,67,'Essays',1580,'800-1500',4,2,5,63,8),
(68,68,'Their Eyes Were Watching God',1937,'200-300',3.8,1,4,96,1),
(69,69,'Midnight\'s Children',1981,'450-550',4,1,3,75,11),
(70,70,'The Scarlet Letter',1850,'200-300',3.5,1,4,67,1),
(71,71,'Hamlet',1600,'100-200',4.3,1,4,95,4),
(72,72,'A Passage to India',1924,'200-400',3.7,1,2,18,4),
(73,73,'A Farewell to Arms',1929,'300-500',3.9,1,3,23,1),
(74,74,'Robinson Crusoe',1719,'200-300',3.3,1,4,13,4),
(75,75,'The Plague',1947,'200-300',4,1,4,1,8),
(76,76,'Candide',1759,'100-200',3.8,1,4,90,8),
(77,77,'The Portrait of a Lady',1881,'400-600',3.6,1,3,38,1),
(78,78,'Pale Fire',1962,'200-300',4.1,1,4,89,1),
(79,79,'The Castle',1926,'200-300',3.8,1,4,27,6),
(80,80,'The Metamorphosis',1915,'40-100',4.1,1,6,27,6),
(81,82,'Slaughterhouse-Five',1969,'275-320',4.2,1,2,52,1),
(82,81,'All Quiet on the Western Front',1928,'200-300',4.2,1,4,22,9),
(83,83,'The Count of Monte Cristo',1844,'1200-1400',4.6,1,5,3,8),
(84,84,'The Tin Drum',1959,'500-600',3.6,1,1,35,9),
(85,85,'The Good Soldier',1915,'200-300',3.8,1,4,25,4),
(86,86,'As I Lay Dying',1930,'200-300',3.7,1,4,92,1),
(87,87,'The Picture of Dorian Gray',1890,'208',4,1,4,69,4),
(88,89,'Little Women',1868,'300-500',4,1,3,57,1),
(89,90,'A Portrait of the Artist as a Young Man',1916,'200-300',3.7,1,4,44,12),
(90,88,'Faust',1808,'327',3.7,1,2,46,9),
(91,91,'Buddenbrooks',1901,'700-1000',3.9,1,1,82,9),
(92,92,'The Man Without Qualities',1930,'1000-2000',4.8,1,5,74,3),
(93,93,'Waiting for Godot',1953,'60-128',3.7,1,6,76,12),
(94,95,'Emma',1815,'300-500',3.7,1,3,45,4),
(95,94,'Demons',1872,'500-800',3.8,1,1,28,18),
(96,96,'The Age of Innocence',1920,'300-400',4.2,1,2,20,1),
(97,97,'For Whom the Bell Tolls',1940,'450-500',3.7,1,3,23,1),
(98,98,'Dead Souls',1842,'300-550',3.8,1,3,68,18),
(99,99,'Orlando',1928,'200-300',3.9,1,4,88,4),
(100,100,'Oedipus the King',-429,'128',4.1,1,6,77,10),
(101,101,'The Complete Tales and Poems of Edgar Allan Poe',1902,'1000-1500',4.4,1,5,19,1),
(102,102,'Native Son',1940,'350-500',4.2,1,3,72,1),
(103,103,'Dune',1965,'400-500',3.9,1,3,26,1),
(104,104,'The Waste Land',1922,'64-88',3.8,3,6,80,4),
(105,105,'The Unbearable Lightness of Being',1984,'200-400',4,1,2,66,6),
(106,106,'Walden',1854,'200-350',3.8,2,2,37,1),
(107,107,'Doctor Zhivago',1957,'450-700',4.1,1,1,7,18),
(108,108,'Charlotte\'s Web',1952,'192',3.9,1,4,17,1),
(109,109,'The Canterbury Tales',1400,'300-500',3.3,3,3,30,4),
(110,110,'The Bell Jar',1963,'200-300',3.9,1,4,79,1),
(111,111,'In Cold Blood',1966,'300-400',4.4,2,2,84,1),
(112,112,'Treasure Island',1883,'192',3.7,1,4,73,4),
(113,114,'Vanity Fair',1847,'900-1000',3.5,1,1,94,4),
(114,113,'The Big Sleep',1939,'200-300',3.9,1,4,71,1),
(115,117,'The Heart Is A Lonely Hunter',1940,'300-400',3.9,1,2,9,1),
(116,116,'Tess of the d\'Urbervilles',1891,'400-500',4,1,3,81,4),
(117,115,'The Three Musketeers',1844,'400-700',4.1,1,1,3,8),
(118,118,'The Stories of Anton Chekhov',1900,'460',3.8,1,3,6,18),
(119,119,'Antigone',-441,'80',4.1,1,6,77,10),
(120,120,'The Diary of a Young Girl',1947,'220-340',4,2,2,4,7);
/*!40000 ALTER TABLE `book` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER prevent_direct_book_insert
    BEFORE INSERT ON Book
    FOR EACH ROW
BEGIN
    
    IF @allow_book_insert IS NULL OR @allow_book_insert != 1 THEN
        SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = 'Direct INSERT into Book table is not allowed. Use UpsertBook procedure instead.';
    END IF;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER validate_book_rank
    BEFORE INSERT ON Book
    FOR EACH ROW
BEGIN
    
    IF NEW.rank <= 0 THEN
        SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = 'Rank must be a positive integer.';
    END IF;

END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER validate_book_year
    BEFORE INSERT ON Book
    FOR EACH ROW
BEGIN
    
    IF NEW.year > YEAR(CURDATE()) THEN
        SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = 'Year cannot be greater than current year.';
    END IF;
    
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER validate_book_avg_rating
    BEFORE INSERT ON Book
    FOR EACH ROW
BEGIN
    
    IF NEW.avg_rating < 0 OR NEW.avg_rating > 5 THEN
        SIGNAL SQLSTATE '45000' 
        SET MESSAGE_TEXT = 'Average rating must be between 0 and 5.';
    END IF;

END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `bookgenres`
--

DROP TABLE IF EXISTS `bookgenres`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `bookgenres` (
  `book_id` int(11) NOT NULL,
  `genre_id` int(11) NOT NULL,
  PRIMARY KEY (`book_id`,`genre_id`),
  KEY `genre_id` (`genre_id`),
  CONSTRAINT `bookgenres_ibfk_1` FOREIGN KEY (`book_id`) REFERENCES `book` (`book_id`) ON UPDATE CASCADE,
  CONSTRAINT `bookgenres_ibfk_2` FOREIGN KEY (`genre_id`) REFERENCES `genre` (`genre_id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `bookgenres`
--

LOCK TABLES `bookgenres` WRITE;
/*!40000 ALTER TABLE `bookgenres` DISABLE KEYS */;
INSERT INTO `bookgenres` VALUES
(22,1),
(14,2),
(21,2),
(22,2),
(32,2),
(35,2),
(93,2),
(7,3),
(16,3),
(20,3),
(24,3),
(46,3),
(63,3),
(74,3),
(83,3),
(112,3),
(117,3),
(2,4),
(8,4),
(9,4),
(14,4),
(21,4),
(26,4),
(28,4),
(31,4),
(33,4),
(34,4),
(38,4),
(40,4),
(43,4),
(45,4),
(47,4),
(51,4),
(54,4),
(56,4),
(61,4),
(63,4),
(69,4),
(70,4),
(75,4),
(76,4),
(79,4),
(80,4),
(84,4),
(85,4),
(86,4),
(87,4),
(89,4),
(99,4),
(109,4),
(109,5),
(14,6),
(20,6),
(120,6),
(32,7),
(45,7),
(108,7),
(4,8),
(17,8),
(29,8),
(33,8),
(39,8),
(48,8),
(62,8),
(68,8),
(77,8),
(88,8),
(89,8),
(110,8),
(11,9),
(83,9),
(111,9),
(114,9),
(67,10),
(5,11),
(34,11),
(79,11),
(80,11),
(81,11),
(84,11),
(35,12),
(67,13),
(120,13),
(3,14),
(10,14),
(12,14),
(17,14),
(19,14),
(23,14),
(36,14),
(38,14),
(40,14),
(71,14),
(77,14),
(96,14),
(100,14),
(111,14),
(116,14),
(118,14),
(119,14),
(6,15),
(49,15),
(51,15),
(22,16),
(79,16),
(80,16),
(105,16),
(1,17),
(58,17),
(78,17),
(104,17),
(10,18),
(19,18),
(88,18),
(91,18),
(108,18),
(16,19),
(32,19),
(46,19),
(103,19),
(1,20),
(2,20),
(3,20),
(4,20),
(5,20),
(6,20),
(7,20),
(8,20),
(9,20),
(10,20),
(11,20),
(12,20),
(13,20),
(14,20),
(15,20),
(16,20),
(17,20),
(19,20),
(20,20),
(21,20),
(22,20),
(23,20),
(24,20),
(25,20),
(26,20),
(27,20),
(28,20),
(29,20),
(30,20),
(31,20),
(32,20),
(33,20),
(34,20),
(35,20),
(36,20),
(37,20),
(38,20),
(39,20),
(40,20),
(41,20),
(42,20),
(43,20),
(44,20),
(45,20),
(46,20),
(47,20),
(48,20),
(49,20),
(50,20),
(51,20),
(52,20),
(53,20),
(54,20),
(55,20),
(56,20),
(57,20),
(58,20),
(59,20),
(60,20),
(61,20),
(62,20),
(63,20),
(64,20),
(65,20),
(68,20),
(69,20),
(70,20),
(71,20),
(72,20),
(73,20),
(74,20),
(75,20),
(76,20),
(77,20),
(78,20),
(79,20),
(80,20),
(81,20),
(82,20),
(83,20),
(84,20),
(85,20),
(86,20),
(87,20),
(88,20),
(89,20),
(90,20),
(91,20),
(92,20),
(93,20),
(94,20),
(95,20),
(96,20),
(97,20),
(98,20),
(99,20),
(100,20),
(101,20),
(102,20),
(103,20),
(104,20),
(105,20),
(107,20),
(108,20),
(109,20),
(110,20),
(112,20),
(113,20),
(114,20),
(115,20),
(116,20),
(117,20),
(118,20),
(119,20),
(32,21),
(46,21),
(38,22),
(51,22),
(90,22),
(103,22),
(15,23),
(29,23),
(42,23),
(57,23),
(64,23),
(70,23),
(87,23),
(90,23),
(95,23),
(101,23),
(114,24),
(16,25),
(7,26),
(10,26),
(13,26),
(16,26),
(25,26),
(26,26),
(30,26),
(37,26),
(38,26),
(39,26),
(41,26),
(43,26),
(48,26),
(52,26),
(53,26),
(59,26),
(62,26),
(65,26),
(69,26),
(70,26),
(72,26),
(73,26),
(74,26),
(83,26),
(88,26),
(91,26),
(96,26),
(97,26),
(107,26),
(109,26),
(117,26),
(42,27),
(57,27),
(101,27),
(9,28),
(1,29),
(2,29),
(3,29),
(4,29),
(5,29),
(7,29),
(8,29),
(9,29),
(10,29),
(11,29),
(12,29),
(13,29),
(14,29),
(15,29),
(17,29),
(19,29),
(20,29),
(21,29),
(22,29),
(23,29),
(25,29),
(26,29),
(28,29),
(29,29),
(30,29),
(31,29),
(33,29),
(34,29),
(35,29),
(36,29),
(38,29),
(39,29),
(40,29),
(41,29),
(43,29),
(44,29),
(45,29),
(47,29),
(48,29),
(50,29),
(51,29),
(52,29),
(53,29),
(54,29),
(55,29),
(56,29),
(58,29),
(59,29),
(60,29),
(61,29),
(62,29),
(63,29),
(64,29),
(68,29),
(69,29),
(70,29),
(71,29),
(72,29),
(73,29),
(74,29),
(75,29),
(77,29),
(78,29),
(79,29),
(80,29),
(81,29),
(82,29),
(83,29),
(84,29),
(85,29),
(86,29),
(87,29),
(88,29),
(89,29),
(90,29),
(91,29),
(92,29),
(93,29),
(94,29),
(95,29),
(96,29),
(97,29),
(98,29),
(99,29),
(102,29),
(103,29),
(104,29),
(105,29),
(107,29),
(109,29),
(110,29),
(113,29),
(115,29),
(116,29),
(118,29),
(5,30),
(34,30),
(45,30),
(52,30),
(68,30),
(69,30),
(84,30),
(90,30),
(99,30),
(120,31),
(108,32),
(1,33),
(2,33),
(3,33),
(8,33),
(26,33),
(28,33),
(36,33),
(43,33),
(56,33),
(60,33),
(61,33),
(85,33),
(86,33),
(89,33),
(92,33),
(99,33),
(104,33),
(57,34),
(64,34),
(83,34),
(101,34),
(112,34),
(114,34),
(117,34),
(2,35),
(18,35),
(24,35),
(27,35),
(37,35),
(46,35),
(65,35),
(78,35),
(100,35),
(119,35),
(67,36),
(106,36),
(111,36),
(120,36),
(106,37),
(1,38),
(9,38),
(20,38),
(47,38),
(58,38),
(63,38),
(76,38),
(79,38),
(92,38),
(98,38),
(93,39),
(119,39),
(27,40),
(65,40),
(66,40),
(101,40),
(104,40),
(109,40),
(6,41),
(41,41),
(54,41),
(72,41),
(95,41),
(102,41),
(103,41),
(1,42),
(2,42),
(14,42),
(34,42),
(35,42),
(44,42),
(56,42),
(58,42),
(60,42),
(69,42),
(78,42),
(79,42),
(80,42),
(81,42),
(84,42),
(86,42),
(92,42),
(93,42),
(99,42),
(105,42),
(8,43),
(11,43),
(14,43),
(19,43),
(21,43),
(28,43),
(31,43),
(36,43),
(41,43),
(51,43),
(52,43),
(55,43),
(56,43),
(60,43),
(64,43),
(83,43),
(87,43),
(95,43),
(101,43),
(102,43),
(110,43),
(111,43),
(4,44),
(108,44),
(115,44),
(12,45),
(94,45),
(18,46),
(27,46),
(66,46),
(106,46),
(12,47),
(29,47),
(53,47),
(94,47),
(117,47),
(5,48),
(53,48),
(7,49),
(24,49),
(50,49),
(74,49),
(112,49),
(6,50),
(9,50),
(35,50),
(54,50),
(58,50),
(63,50),
(76,50),
(81,50),
(84,50),
(98,50),
(113,50),
(6,51),
(49,51),
(81,51),
(103,51),
(44,52),
(118,52),
(1,53),
(2,53),
(3,53),
(4,53),
(5,53),
(8,53),
(11,53),
(13,53),
(17,53),
(20,53),
(22,53),
(23,53),
(25,53),
(26,53),
(30,53),
(31,53),
(33,53),
(36,53),
(39,53),
(40,53),
(43,53),
(47,53),
(48,53),
(49,53),
(50,53),
(52,53),
(55,53),
(59,53),
(60,53),
(61,53),
(62,53),
(66,53),
(68,53),
(69,53),
(72,53),
(75,53),
(77,53),
(81,53),
(82,53),
(85,53),
(91,53),
(92,53),
(94,53),
(96,53),
(102,53),
(105,53),
(107,53),
(110,53),
(113,53),
(115,53),
(116,53),
(118,53),
(6,54),
(16,54),
(32,54),
(42,54),
(46,54),
(49,54),
(51,54),
(57,54),
(81,54),
(101,54),
(103,54),
(57,55),
(32,56),
(44,56),
(80,56),
(101,57),
(3,58),
(8,58),
(10,58),
(15,58),
(23,58),
(25,58),
(37,58),
(43,58),
(55,58),
(56,58),
(59,58),
(71,58),
(73,58),
(82,58),
(85,58),
(86,58),
(90,58),
(91,58),
(96,58),
(97,58),
(100,58),
(102,58),
(107,58),
(110,58),
(115,58),
(116,58),
(119,58),
(40,59),
(106,59),
(111,60),
(12,61),
(15,61),
(29,61),
(30,61),
(38,61),
(39,61),
(48,61),
(57,61),
(77,61),
(88,61),
(94,61),
(112,61),
(113,61),
(116,61),
(4,62),
(13,63),
(16,63),
(24,63),
(27,63),
(37,63),
(46,63),
(65,63),
(44,64),
(78,64),
(13,65),
(73,65),
(82,65),
(97,65),
(114,66),
(1,67),
(2,67),
(7,67),
(10,67),
(11,67),
(13,67),
(19,67),
(21,67),
(22,67),
(23,67),
(26,67),
(27,67),
(28,67),
(30,67),
(31,67),
(33,67),
(34,67),
(38,67),
(41,67),
(42,67),
(44,67),
(47,67),
(49,67),
(50,67),
(55,67),
(58,67),
(59,67),
(66,67),
(67,67),
(71,67),
(72,67),
(75,67),
(76,67),
(87,67),
(89,67),
(90,67),
(92,67),
(93,67),
(95,67),
(98,67),
(100,67),
(104,67),
(105,67),
(106,67),
(107,67),
(119,67);
/*!40000 ALTER TABLE `bookgenres` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `booklanguages`
--

DROP TABLE IF EXISTS `booklanguages`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `booklanguages` (
  `book_id` int(11) NOT NULL,
  `language_id` int(11) NOT NULL,
  PRIMARY KEY (`book_id`,`language_id`),
  KEY `language_id` (`language_id`),
  CONSTRAINT `booklanguages_ibfk_1` FOREIGN KEY (`book_id`) REFERENCES `book` (`book_id`) ON UPDATE CASCADE,
  CONSTRAINT `booklanguages_ibfk_2` FOREIGN KEY (`language_id`) REFERENCES `language` (`language_id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `booklanguages`
--

LOCK TABLES `booklanguages` WRITE;
/*!40000 ALTER TABLE `booklanguages` DISABLE KEYS */;
INSERT INTO `booklanguages` VALUES
(24,1),
(37,1),
(100,1),
(119,1),
(46,2),
(105,3),
(120,4),
(1,5),
(3,5),
(4,5),
(6,5),
(7,5),
(8,5),
(12,5),
(14,5),
(15,5),
(16,5),
(17,5),
(20,5),
(25,5),
(28,5),
(29,5),
(30,5),
(31,5),
(32,5),
(33,5),
(35,5),
(36,5),
(39,5),
(40,5),
(42,5),
(43,5),
(48,5),
(49,5),
(50,5),
(51,5),
(52,5),
(53,5),
(54,5),
(56,5),
(57,5),
(58,5),
(60,5),
(61,5),
(62,5),
(63,5),
(64,5),
(66,5),
(68,5),
(69,5),
(70,5),
(71,5),
(72,5),
(73,5),
(74,5),
(77,5),
(78,5),
(81,5),
(85,5),
(86,5),
(87,5),
(88,5),
(89,5),
(94,5),
(96,5),
(97,5),
(99,5),
(101,5),
(102,5),
(103,5),
(104,5),
(106,5),
(108,5),
(110,5),
(111,5),
(112,5),
(113,5),
(114,5),
(115,5),
(116,5),
(2,6),
(22,6),
(23,6),
(38,6),
(41,6),
(45,6),
(47,6),
(67,6),
(75,6),
(76,6),
(83,6),
(93,6),
(117,6),
(21,7),
(26,7),
(79,7),
(80,7),
(82,7),
(84,7),
(90,7),
(91,7),
(92,7),
(18,8),
(27,9),
(59,9),
(65,10),
(109,11),
(10,12),
(11,12),
(13,12),
(19,12),
(34,12),
(55,12),
(95,12),
(98,12),
(107,12),
(118,12),
(5,13),
(9,13),
(44,13),
(18,14),
(18,15);
/*!40000 ALTER TABLE `booklanguages` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `booksubjects`
--

DROP TABLE IF EXISTS `booksubjects`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `booksubjects` (
  `book_id` int(11) NOT NULL,
  `subject_id` int(11) NOT NULL,
  PRIMARY KEY (`book_id`,`subject_id`),
  KEY `subject_id` (`subject_id`),
  CONSTRAINT `booksubjects_ibfk_1` FOREIGN KEY (`book_id`) REFERENCES `book` (`book_id`) ON UPDATE CASCADE,
  CONSTRAINT `booksubjects_ibfk_2` FOREIGN KEY (`subject_id`) REFERENCES `subject` (`subject_id`) ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `booksubjects`
--

LOCK TABLES `booksubjects` WRITE;
/*!40000 ALTER TABLE `booksubjects` DISABLE KEYS */;
INSERT INTO `booksubjects` VALUES
(114,1),
(4,2),
(120,2),
(23,3),
(41,3),
(85,3),
(52,4),
(68,4),
(33,5),
(68,5),
(27,6),
(61,7),
(1,8),
(4,8),
(11,8),
(21,8),
(22,8),
(31,8),
(33,8),
(79,8),
(80,8),
(102,8),
(115,8),
(30,9),
(39,9),
(41,9),
(42,9),
(48,9),
(90,9),
(110,9),
(113,9),
(3,10),
(32,11),
(108,11),
(69,12),
(79,13),
(40,14),
(87,15),
(41,16),
(43,16),
(46,16),
(48,16),
(54,16),
(71,16),
(77,16),
(83,16),
(85,16),
(97,16),
(103,16),
(107,16),
(112,16),
(117,16),
(58,17),
(114,18),
(100,19),
(23,20),
(61,21),
(21,22),
(35,22),
(79,22),
(98,22),
(118,22),
(91,23),
(111,24),
(32,25),
(9,26),
(109,26),
(18,27),
(53,28),
(26,29),
(51,29),
(74,29),
(91,29),
(54,30),
(27,31),
(65,31),
(67,31),
(100,31),
(22,32),
(115,33),
(60,34),
(25,35),
(52,35),
(62,35),
(68,35),
(82,36),
(49,37),
(96,37),
(110,37),
(1,38),
(87,39),
(6,40),
(49,40),
(79,40),
(40,41),
(16,42),
(17,42),
(73,42),
(97,42),
(112,42),
(117,42),
(12,43),
(94,43),
(18,44),
(18,45),
(42,45),
(89,46),
(78,47),
(72,48),
(63,49),
(46,50),
(31,51),
(8,52),
(28,52),
(34,52),
(35,52),
(36,52),
(55,52),
(56,52),
(58,52),
(59,52),
(64,52),
(78,52),
(82,52),
(85,52),
(86,52),
(91,52),
(97,52),
(111,52),
(119,52),
(8,53),
(15,53),
(22,53),
(28,53),
(67,53),
(71,53),
(81,53),
(86,53),
(101,53),
(104,53),
(24,54),
(64,54),
(83,54),
(85,54),
(94,54),
(98,54),
(109,54),
(113,54),
(114,54),
(117,54),
(59,55),
(91,55),
(50,56),
(14,57),
(23,57),
(13,58),
(16,58),
(25,58),
(47,58),
(56,58),
(73,58),
(90,58),
(93,58),
(101,58),
(104,58),
(115,58),
(118,58),
(16,59),
(65,59),
(69,59),
(114,60),
(60,61),
(23,62),
(61,62),
(82,62),
(37,63),
(65,63),
(27,64),
(32,65),
(44,65),
(86,66),
(96,66),
(119,66),
(49,67),
(29,68),
(30,68),
(48,68),
(67,68),
(89,68),
(17,69),
(54,70),
(97,71),
(37,72),
(67,72),
(120,72),
(65,73),
(19,74),
(21,74),
(22,74),
(47,74),
(56,74),
(75,74),
(79,74),
(93,74),
(105,74),
(118,74),
(61,75),
(25,76),
(45,77),
(18,78),
(19,78),
(27,78),
(74,78),
(1,79),
(2,79),
(4,79),
(5,79),
(8,79),
(10,79),
(11,79),
(12,79),
(17,79),
(18,79),
(19,79),
(24,79),
(25,79),
(28,79),
(29,79),
(30,79),
(42,79),
(43,79),
(48,79),
(52,79),
(53,79),
(59,79),
(62,79),
(65,79),
(69,79),
(71,79),
(77,79),
(86,79),
(88,79),
(89,79),
(91,79),
(94,79),
(95,79),
(96,79),
(100,79),
(103,79),
(107,79),
(108,79),
(111,79),
(113,79),
(114,79),
(116,79),
(118,79),
(119,79),
(5,80),
(10,80),
(25,80),
(29,80),
(52,80),
(86,80),
(91,80),
(116,80),
(118,80),
(25,81),
(108,81),
(5,82),
(7,82),
(13,82),
(24,82),
(37,82),
(46,82),
(81,82),
(100,82),
(105,82),
(116,82),
(60,83),
(38,84),
(70,84),
(83,84),
(104,85),
(19,86),
(81,86),
(6,87),
(20,87),
(22,87),
(40,87),
(49,87),
(52,87),
(66,87),
(68,87),
(77,87),
(89,87),
(97,87),
(105,87),
(38,88),
(1,89),
(2,89),
(7,89),
(9,89),
(16,89),
(32,89),
(35,89),
(36,89),
(37,89),
(40,89),
(45,89),
(48,89),
(57,89),
(61,89),
(67,89),
(72,89),
(73,89),
(78,89),
(82,89),
(85,89),
(88,89),
(94,89),
(95,89),
(108,89),
(112,89),
(113,89),
(115,89),
(117,89),
(79,90),
(52,91),
(16,92),
(57,92),
(90,92),
(86,93),
(39,94),
(8,95),
(11,95),
(14,95),
(19,95),
(21,95),
(43,95),
(52,95),
(56,95),
(64,95),
(70,95),
(80,95),
(89,95),
(100,95),
(101,95),
(49,96),
(9,97),
(24,97),
(35,97),
(37,97),
(65,97),
(3,98),
(5,98),
(8,98),
(18,98),
(25,98),
(33,98),
(37,98),
(40,98),
(50,98),
(53,98),
(61,98),
(65,98),
(67,98),
(68,98),
(69,98),
(88,98),
(99,98),
(102,98),
(106,98),
(111,98),
(115,98),
(118,98),
(120,98),
(9,99),
(37,99),
(117,99),
(119,99),
(24,100),
(93,101),
(74,102),
(120,103),
(89,104),
(100,104),
(47,105),
(66,105),
(75,105),
(41,106),
(70,106),
(76,106),
(1,107),
(3,107),
(4,107),
(6,107),
(7,107),
(10,107),
(13,107),
(14,107),
(20,107),
(22,107),
(24,107),
(31,107),
(33,107),
(39,107),
(42,107),
(44,107),
(48,107),
(49,107),
(53,107),
(66,107),
(70,107),
(71,107),
(87,107),
(102,107),
(103,107),
(104,107),
(105,107),
(110,107),
(115,107),
(95,108),
(2,109),
(26,109),
(55,109),
(91,109),
(3,110),
(9,110),
(23,110),
(78,111),
(57,112),
(99,112),
(31,113),
(83,114),
(22,115),
(62,116),
(66,117),
(96,117),
(106,117),
(10,118),
(85,118),
(105,118),
(44,119),
(87,120),
(91,121),
(77,122),
(82,123),
(25,124),
(38,124),
(39,124),
(116,124),
(4,125),
(14,125),
(45,125),
(51,125),
(55,125),
(35,126),
(12,127),
(30,127),
(77,127),
(117,128),
(111,129),
(40,130),
(2,131),
(55,131),
(64,131),
(94,131),
(120,132),
(111,133),
(24,134),
(70,135),
(11,136),
(17,136),
(19,136),
(21,136),
(22,136),
(27,136),
(38,136),
(46,136),
(72,136),
(83,136),
(100,136),
(102,136),
(111,136),
(119,136),
(32,137),
(62,137),
(82,137),
(108,137),
(9,138),
(44,139),
(90,139),
(25,140),
(44,141),
(6,142),
(18,143),
(21,143),
(111,143),
(119,143),
(51,144),
(65,144),
(103,144),
(43,145),
(2,146),
(99,146),
(58,147),
(108,148),
(22,149),
(8,150),
(73,150),
(2,151),
(3,151),
(10,151),
(12,151),
(13,151),
(15,151),
(29,151),
(30,151),
(34,151),
(36,151),
(38,151),
(39,151),
(41,151),
(46,151),
(53,151),
(55,151),
(56,151),
(61,151),
(64,151),
(68,151),
(73,151),
(77,151),
(83,151),
(84,151),
(85,151),
(88,151),
(90,151),
(94,151),
(96,151),
(97,151),
(99,151),
(101,151),
(105,151),
(107,151),
(118,151),
(16,152),
(24,152),
(97,152),
(108,152),
(112,152),
(117,152),
(119,152),
(7,153),
(9,153),
(11,153),
(15,153),
(31,153),
(34,153),
(55,153),
(57,153),
(71,153),
(78,153),
(84,153),
(86,153),
(95,153),
(101,153),
(34,154),
(69,154),
(14,155),
(77,155),
(10,156),
(12,156),
(18,156),
(23,156),
(28,156),
(30,156),
(36,156),
(48,156),
(53,156),
(59,156),
(68,156),
(77,156),
(85,156),
(91,156),
(94,156),
(96,156),
(113,156),
(116,156),
(118,156),
(23,157),
(30,158),
(47,158),
(58,158),
(73,158),
(107,158),
(2,159),
(5,159),
(8,159),
(28,159),
(36,159),
(52,159),
(69,159),
(105,159),
(29,160),
(60,160),
(8,161),
(36,161),
(85,161),
(18,162),
(25,163),
(35,164),
(85,164),
(108,165),
(92,166),
(104,166),
(11,167),
(17,168),
(1,169),
(7,169),
(22,169),
(37,169),
(66,169),
(71,169),
(75,169),
(118,169),
(52,170),
(78,171),
(111,171),
(114,171),
(84,172),
(104,173),
(7,174),
(16,174),
(28,174),
(42,174),
(50,174),
(66,174),
(106,174),
(116,174),
(103,175),
(95,176),
(78,177),
(99,177),
(32,178),
(69,179),
(72,180),
(22,181),
(7,182),
(14,182),
(43,182),
(78,182),
(58,183),
(76,184),
(44,185),
(21,186),
(78,186),
(9,187),
(78,187),
(69,188),
(13,189),
(84,190),
(120,191),
(50,192),
(22,193),
(34,193),
(45,193),
(58,193),
(67,193),
(76,193),
(92,193),
(4,194),
(65,195),
(109,196),
(112,197),
(6,198),
(54,198),
(66,198),
(30,199),
(34,199),
(41,199),
(56,199),
(59,199),
(60,199),
(69,199),
(84,199),
(92,199),
(107,199),
(61,200),
(11,201),
(25,201),
(38,201),
(47,201),
(48,201),
(55,201),
(86,201),
(88,201),
(102,201),
(5,202),
(16,202),
(21,202),
(31,202),
(33,202),
(34,202),
(41,202),
(51,202),
(54,202),
(59,202),
(62,202),
(63,202),
(69,202),
(71,202),
(79,202),
(83,202),
(95,202),
(103,202),
(14,203),
(12,204),
(17,204),
(12,205),
(50,205),
(100,205),
(6,206),
(54,206),
(18,207),
(100,207),
(103,207),
(92,208),
(111,208),
(35,209),
(68,209),
(110,209),
(70,210),
(111,210),
(116,211),
(52,212),
(62,212),
(72,212),
(17,213),
(20,213),
(33,213),
(43,213),
(72,213),
(102,213),
(115,213),
(37,214),
(104,215),
(53,216),
(11,217),
(18,217),
(19,217),
(27,217),
(38,217),
(39,217),
(55,217),
(56,217),
(70,217),
(83,217),
(90,217),
(106,218),
(30,219),
(82,220),
(111,220),
(12,221),
(48,222),
(50,222),
(53,222),
(75,222),
(42,223),
(80,223),
(7,224),
(15,224),
(24,224),
(42,224),
(43,224),
(71,224),
(83,224),
(101,224),
(117,224),
(38,225),
(54,225),
(69,225),
(95,225),
(103,225),
(107,225),
(16,226),
(18,226),
(38,226),
(88,226),
(97,226),
(108,226),
(18,227),
(27,227),
(34,228),
(51,229),
(22,230),
(42,231),
(92,231),
(57,232),
(33,233),
(40,233),
(68,233),
(94,233),
(67,234),
(74,235),
(106,235),
(1,236),
(60,236),
(89,236),
(106,237),
(18,238),
(27,238),
(70,238),
(88,239),
(67,240),
(43,241),
(52,241),
(53,241),
(15,242),
(23,242),
(30,242),
(39,242),
(48,242),
(53,242),
(72,242),
(91,242),
(94,242),
(109,242),
(116,242),
(118,242),
(9,243),
(17,244),
(38,244),
(33,245),
(12,246),
(2,247),
(10,247),
(13,247),
(20,247),
(22,247),
(36,247),
(41,247),
(55,247),
(63,247),
(67,247),
(77,247),
(92,247),
(96,247),
(98,247),
(99,247),
(110,247),
(113,247),
(10,248),
(82,249),
(75,250),
(5,251),
(106,251),
(20,252),
(8,253),
(43,253),
(86,253),
(46,254),
(109,254),
(50,255),
(79,255),
(47,256),
(65,256),
(75,256),
(76,256),
(86,256),
(93,256),
(100,256),
(57,257),
(25,258),
(35,258),
(51,258),
(53,258),
(74,258),
(81,258),
(82,258),
(103,258),
(107,258),
(120,258),
(49,259),
(90,260),
(1,261),
(2,261),
(5,261),
(8,261),
(28,261),
(36,261),
(44,261),
(81,261),
(93,261),
(99,261),
(99,262),
(66,263),
(106,263),
(32,264),
(80,264),
(99,264),
(52,265),
(81,265),
(82,265),
(100,266),
(66,267),
(12,268),
(57,269),
(97,270),
(102,270),
(111,270),
(27,271),
(93,272),
(13,273),
(35,273),
(36,273),
(37,273),
(47,273),
(53,273),
(58,273),
(61,273),
(65,273),
(73,273),
(81,273),
(82,273),
(84,273),
(97,273),
(107,273),
(120,273),
(3,274),
(12,274),
(39,274),
(55,274),
(77,274),
(83,274),
(91,274),
(98,274),
(113,274),
(114,274),
(18,275),
(45,275),
(46,275),
(88,276),
(29,277),
(36,277),
(52,277),
(60,277),
(94,277),
(99,277),
(110,277),
(80,278),
(47,279),
(61,279),
(73,279),
(82,279),
(107,279),
(35,280),
(84,280),
(120,280),
(82,281),
(87,281),
(56,282),
(59,283),
(59,284),
(62,284),
(17,285),
(20,285),
(28,285),
(32,285),
(45,285),
(108,285),
(3,286),
(8,286),
(12,286),
(29,286),
(36,286),
(41,286),
(64,286),
(96,286),
(113,286),
(31,287),
(47,287),
(60,287),
(62,287),
(72,287),
(74,287),
(62,288),
(69,288),
(119,288),
(49,289),
(16,290),
(54,290),
(71,290),
(76,290),
(87,290),
(95,290),
(98,290),
(109,290),
(114,290),
(32,291),
(4,292),
(110,292),
(106,293),
(6,294),
(35,294),
(51,294),
(57,294),
(101,294),
(102,294),
(120,294),
(28,295),
(29,295),
(68,295),
(99,295),
(88,296),
(116,296),
(98,297),
(112,297),
(27,298),
(45,298),
(51,298),
(63,298),
(67,298),
(90,298),
(98,298),
(118,298),
(9,299),
(45,299),
(33,300),
(4,301),
(7,301),
(11,301),
(15,301),
(42,301),
(50,301),
(57,301),
(70,301),
(74,301),
(75,301),
(79,301),
(80,301),
(86,301),
(101,301),
(110,301),
(115,301),
(118,301),
(120,301),
(32,302),
(3,303),
(45,303),
(115,303),
(94,304),
(61,305),
(62,305),
(3,306),
(10,306),
(13,306),
(14,306),
(19,306),
(20,306),
(22,306),
(27,306),
(30,306),
(31,306),
(38,306),
(63,306),
(67,306),
(87,306),
(90,306),
(92,306),
(95,306),
(98,306),
(109,306),
(113,306),
(116,306),
(21,307),
(54,307),
(102,307),
(29,308),
(48,308),
(54,309),
(8,310),
(68,310),
(25,311),
(77,311),
(9,312),
(44,312),
(4,313),
(6,313),
(84,313),
(89,313),
(119,313),
(2,314),
(12,314),
(45,314),
(56,314),
(60,314),
(61,314),
(68,314),
(73,314),
(77,314),
(92,314),
(64,315),
(2,316),
(8,316),
(28,316),
(86,316),
(6,317),
(8,318),
(59,318),
(62,318),
(91,318),
(96,318),
(112,319),
(87,320),
(113,320),
(58,321),
(60,321),
(120,321);
/*!40000 ALTER TABLE `booksubjects` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `country`
--

DROP TABLE IF EXISTS `country`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `country` (
  `country_id` int(11) NOT NULL AUTO_INCREMENT,
  `country_name` varchar(255) NOT NULL,
  PRIMARY KEY (`country_id`)
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `country`
--

LOCK TABLES `country` WRITE;
/*!40000 ALTER TABLE `country` DISABLE KEYS */;
INSERT INTO `country` VALUES
(1,'American'),
(2,'Argentinian'),
(3,'Austrian'),
(4,'British'),
(5,'Colombian'),
(6,'Czech'),
(7,'Dutch'),
(8,'French'),
(9,'German'),
(10,'Greek'),
(11,'Indian'),
(12,'Irish'),
(13,'Italian'),
(14,'Jewish'),
(15,'Multiple'),
(16,'Nigerian'),
(17,'Roman'),
(18,'Russian'),
(19,'Spanish');
/*!40000 ALTER TABLE `country` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `genre`
--

DROP TABLE IF EXISTS `genre`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `genre` (
  `genre_id` int(11) NOT NULL AUTO_INCREMENT,
  `genre_name` varchar(255) NOT NULL,
  PRIMARY KEY (`genre_id`)
) ENGINE=InnoDB AUTO_INCREMENT=68 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `genre`
--

LOCK TABLES `genre` WRITE;
/*!40000 ALTER TABLE `genre` DISABLE KEYS */;
INSERT INTO `genre` VALUES
(1,'20th century'),
(2,'Absurdist'),
(3,'Adventure'),
(4,'Allegorical'),
(5,'Anthologies'),
(6,'Banned books'),
(7,'Children\'s books'),
(8,'Coming of age'),
(9,'Crime'),
(10,'Cultural'),
(11,'Dark'),
(12,'Dark Humor'),
(13,'Diaries & Journals'),
(14,'Drama'),
(15,'Dystopian'),
(16,'Existentialist'),
(17,'Experimental'),
(18,'Family & Relationships'),
(19,'Fantasy'),
(20,'Fiction'),
(21,'Folklore & Fairy Tales'),
(22,'Good and evil'),
(23,'Gothic'),
(24,'Hard Boiled'),
(25,'High Fantasy'),
(26,'Historical fiction'),
(27,'Horror'),
(28,'Humor'),
(29,'Literary Fiction'),
(30,'Magical Realism'),
(31,'Memoir'),
(32,'Middle Grade'),
(33,'Modernist'),
(34,'Mystery'),
(35,'Mythological'),
(36,'Nonfiction'),
(37,'Pastoral'),
(38,'Picaresque'),
(39,'Plays'),
(40,'Poetry'),
(41,'Political'),
(42,'Postmodern'),
(43,'Psychological'),
(44,'Realistic Fiction'),
(45,'Regency'),
(46,'Religion & Spirituality'),
(47,'Romance'),
(48,'Sagas'),
(49,'Sailors & The Sea'),
(50,'Satire'),
(51,'Science fiction'),
(52,'Short Story Collection'),
(53,'Social & Cultural Fiction'),
(54,'Speculative Fiction'),
(55,'Supernatural'),
(56,'Surreal'),
(57,'Technical'),
(58,'Tragedy'),
(59,'Travel'),
(60,'True crime'),
(61,'Victorian'),
(62,'Young adult'),
(63,'epic'),
(64,'metafiction'),
(65,'military fiction'),
(66,'noir'),
(67,'philosophical');
/*!40000 ALTER TABLE `genre` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `language`
--

DROP TABLE IF EXISTS `language`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `language` (
  `language_id` int(11) NOT NULL AUTO_INCREMENT,
  `language_name` varchar(255) NOT NULL,
  PRIMARY KEY (`language_id`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `language`
--

LOCK TABLES `language` WRITE;
/*!40000 ALTER TABLE `language` DISABLE KEYS */;
INSERT INTO `language` VALUES
(1,'Ancient greek'),
(2,'Arabic'),
(3,'Czech'),
(4,'Dutch'),
(5,'English'),
(6,'French'),
(7,'German'),
(8,'Hebrew'),
(9,'Italian'),
(10,'Latin'),
(11,'Middle english'),
(12,'Russian'),
(13,'Spanish'),
(14,'aramaic'),
(15,'greek');
/*!40000 ALTER TABLE `language` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `length`
--

DROP TABLE IF EXISTS `length`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `length` (
  `length_id` int(11) NOT NULL AUTO_INCREMENT,
  `length_name` varchar(255) NOT NULL,
  PRIMARY KEY (`length_id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `length`
--

LOCK TABLES `length` WRITE;
/*!40000 ALTER TABLE `length` DISABLE KEYS */;
INSERT INTO `length` VALUES
(1,'Long'),
(2,'Medium'),
(3,'Moderate'),
(4,'Short'),
(5,'Very Long'),
(6,'Very Short');
/*!40000 ALTER TABLE `length` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `subject`
--

DROP TABLE IF EXISTS `subject`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `subject` (
  `subject_id` int(11) NOT NULL AUTO_INCREMENT,
  `subject_name` varchar(255) NOT NULL,
  PRIMARY KEY (`subject_id`)
) ENGINE=InnoDB AUTO_INCREMENT=322 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `subject`
--

LOCK TABLES `subject` WRITE;
/*!40000 ALTER TABLE `subject` DISABLE KEYS */;
INSERT INTO `subject` VALUES
(1,'Addiction'),
(2,'Adolescence'),
(3,'Adultery'),
(4,'African American'),
(5,'African American History'),
(6,'Afterlife'),
(7,'Alcohol'),
(8,'Alienation'),
(9,'Ambition'),
(10,'American dream'),
(11,'Animals'),
(12,'Asian History'),
(13,'Authority'),
(14,'Beat Generation'),
(15,'Beauty'),
(16,'Betrayal'),
(17,'Birth'),
(18,'Blackmail'),
(19,'Blindness'),
(20,'Boredom'),
(21,'Bullfighting'),
(22,'Bureaucracy'),
(23,'Business'),
(24,'Case studies'),
(25,'Childhood and youth'),
(26,'Chivalry'),
(27,'Christianity'),
(28,'Civil War'),
(29,'Civilization'),
(30,'Class Struggle'),
(31,'Classical Studies'),
(32,'Classics'),
(33,'Communication'),
(34,'Communism'),
(35,'Community'),
(36,'Comradeship'),
(37,'Conformity'),
(38,'Consciousness'),
(39,'Consequences'),
(40,'Control'),
(41,'Counterculture'),
(42,'Courage'),
(43,'Courtship'),
(44,'Covenant'),
(45,'Creation'),
(46,'Creativity'),
(47,'Criticism'),
(48,'Cultural Conflict'),
(49,'Culture'),
(50,'Cunning'),
(51,'Darkness'),
(52,'Death'),
(53,'Death & Grief'),
(54,'Deception'),
(55,'Decline'),
(56,'Defeat'),
(57,'Desire'),
(58,'Despair'),
(59,'Destiny'),
(60,'Detective'),
(61,'Diaries'),
(62,'Disillusionment'),
(63,'Divine Intervention'),
(64,'Divine Retribution'),
(65,'Dreams'),
(66,'Duty'),
(67,'Dystopia'),
(68,'Education'),
(69,'Empathy'),
(70,'Equality'),
(71,'Espionage'),
(72,'European History'),
(73,'Exile'),
(74,'Existentialism'),
(75,'Expatriates'),
(76,'Exploitation'),
(77,'Exploration'),
(78,'Faith'),
(79,'Family'),
(80,'Family dynamics'),
(81,'Farm life'),
(82,'Fate'),
(83,'Feminism'),
(84,'Forgiveness'),
(85,'Fragmentation'),
(86,'Free will'),
(87,'Freedom'),
(88,'French Revolution'),
(89,'Friendship'),
(90,'Frustration'),
(91,'Ghosts'),
(92,'Good vs Evil'),
(93,'Grief'),
(94,'Growth'),
(95,'Guilt'),
(96,'Happiness'),
(97,'Heroism'),
(98,'History'),
(99,'Honor'),
(100,'Hospitality'),
(101,'Human Condition'),
(102,'Human Resilience'),
(103,'Human rights'),
(104,'Humanities'),
(105,'Humanity'),
(106,'Hypocrisy'),
(107,'Identity'),
(108,'Ideology'),
(109,'Illness'),
(110,'Illusion'),
(111,'Immigrants'),
(112,'Immortality'),
(113,'Imperialism'),
(114,'Imprisonment'),
(115,'Indifference'),
(116,'Indigenous'),
(117,'Individualism'),
(118,'Infidelity'),
(119,'Infinity'),
(120,'Influence'),
(121,'Inheritance'),
(122,'Inheritance and succession'),
(123,'Injury'),
(124,'Injustice'),
(125,'Innocence'),
(126,'Insanity'),
(127,'Interpersonal relations'),
(128,'Intrigue'),
(129,'Investigation'),
(130,'Jazz'),
(131,'Jealousy'),
(132,'Jewish'),
(133,'Journalism'),
(134,'Journey'),
(135,'Judgment'),
(136,'Justice'),
(137,'Juvenile'),
(138,'Knighthood'),
(139,'Knowledge'),
(140,'Labor'),
(141,'Labyrinths'),
(142,'Language & Writing'),
(143,'Law'),
(144,'Leadership'),
(145,'Legacy'),
(146,'Lgbtq+'),
(147,'Life'),
(148,'Life and Death'),
(149,'Literature'),
(150,'Loss'),
(151,'Love'),
(152,'Loyalty'),
(153,'Madness'),
(154,'Magic'),
(155,'Manipulation'),
(156,'Marriage'),
(157,'Materialism'),
(158,'Medicine'),
(159,'Memory'),
(160,'Mental Health'),
(161,'Mental illness'),
(162,'Middle East History'),
(163,'Migration'),
(164,'Military'),
(165,'Miracles'),
(166,'Modernity'),
(167,'Moral Dilemma'),
(168,'Moral Growth'),
(169,'Mortality'),
(170,'Motherhood'),
(171,'Murder'),
(172,'Music'),
(173,'Mythology'),
(174,'Nature'),
(175,'Nature & Environment'),
(176,'Nihilism'),
(177,'Nobility'),
(178,'Nonsense'),
(179,'Nostalgia'),
(180,'Novela'),
(181,'Novels'),
(182,'Obsession'),
(183,'Opinions'),
(184,'Optimism'),
(185,'Paradox'),
(186,'Paranoia'),
(187,'Parody'),
(188,'Partition'),
(189,'Peace'),
(190,'People with disabilities'),
(191,'Persecution'),
(192,'Perseverance'),
(193,'Philosophy'),
(194,'Phoniness'),
(195,'Piety'),
(196,'Pilgrimage'),
(197,'Piracy'),
(198,'Political Ideologies'),
(199,'Politics'),
(200,'Post-war trauma'),
(201,'Poverty'),
(202,'Power'),
(203,'Power Dynamics'),
(204,'Prejudice'),
(205,'Pride'),
(206,'Propaganda'),
(207,'Prophecy'),
(208,'Psychology'),
(209,'Psychology & Mental Health'),
(210,'Punishment'),
(211,'Purity'),
(212,'Race relations'),
(213,'Racism'),
(214,'Rage'),
(215,'Rebirth'),
(216,'Reconstruction'),
(217,'Redemption'),
(218,'Reflection'),
(219,'Reform'),
(220,'Reportage'),
(221,'Reputation'),
(222,'Resilience'),
(223,'Responsibility'),
(224,'Revenge'),
(225,'Revolution'),
(226,'Sacrifice'),
(227,'Salvation'),
(228,'Satan'),
(229,'Savagery'),
(230,'School'),
(231,'Science'),
(232,'Seduction'),
(233,'Self-discovery'),
(234,'Self-reflection'),
(235,'Self-reliance'),
(236,'Sexuality'),
(237,'Simplicity'),
(238,'Sin'),
(239,'Sisterhood'),
(240,'Skepticism'),
(241,'Slavery'),
(242,'Social Class'),
(243,'Social Critique'),
(244,'Social Inequality'),
(245,'Social Injustice'),
(246,'Social status'),
(247,'Society'),
(248,'Sociology'),
(249,'Soldiers'),
(250,'Solidarity'),
(251,'Solitude'),
(252,'Southern Culture'),
(253,'Southern Gothic'),
(254,'Storytelling'),
(255,'Struggle'),
(256,'Suffering'),
(257,'Superstition'),
(258,'Survival'),
(259,'Technology'),
(260,'Temptation'),
(261,'Time'),
(262,'Time travel'),
(263,'Transcendentalism'),
(264,'Transformation'),
(265,'Trauma'),
(266,'Truth'),
(267,'Unity'),
(268,'Upper class'),
(269,'Vampirism'),
(270,'Violence'),
(271,'Virtue'),
(272,'Waiting'),
(273,'War'),
(274,'Wealth'),
(275,'Wisdom'),
(276,'Women'),
(277,'Women\'s Studies'),
(278,'Work'),
(279,'World War I'),
(280,'World War II'),
(281,'Youth'),
(282,'alcoholism'),
(283,'aristocracy'),
(284,'change'),
(285,'childhood'),
(286,'class'),
(287,'colonialism'),
(288,'conflict'),
(289,'consumerism'),
(290,'corruption'),
(291,'curiosity'),
(292,'depression'),
(293,'economy'),
(294,'fear'),
(295,'gender'),
(296,'gender roles'),
(297,'greed'),
(298,'human nature'),
(299,'imagination'),
(300,'invisibility'),
(301,'isolation'),
(302,'logic'),
(303,'loneliness'),
(304,'manners'),
(305,'masculinity'),
(306,'morality'),
(307,'oppression'),
(308,'orphans'),
(309,'political satire'),
(310,'race'),
(311,'realism'),
(312,'reality'),
(313,'rebellion'),
(314,'relationships'),
(315,'secrets'),
(316,'stream of consciousness'),
(317,'surveillance'),
(318,'tradition'),
(319,'treasure'),
(320,'vanity'),
(321,'writing');
/*!40000 ALTER TABLE `subject` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `type`
--

DROP TABLE IF EXISTS `type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8mb4 */;
CREATE TABLE `type` (
  `type_id` int(11) NOT NULL AUTO_INCREMENT,
  `type_name` varchar(255) NOT NULL,
  PRIMARY KEY (`type_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `type`
--

LOCK TABLES `type` WRITE;
/*!40000 ALTER TABLE `type` DISABLE KEYS */;
INSERT INTO `type` VALUES
(1,'Fiction'),
(2,'Nonfiction'),
(3,'Poetry'),
(4,'Religious');
/*!40000 ALTER TABLE `type` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'books_db'
--
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpsertBook` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `UpsertBook`(
    IN p_rank INT,
    IN p_title VARCHAR(255),
    IN p_year INT,
    IN p_pages VARCHAR(255),
    IN p_avg_rating FLOAT,
    IN p_type_id INT,
    IN p_length_id INT,
    IN p_author_id INT,
    IN p_country_id INT,
    IN p_language_ids VARCHAR(255),
    IN p_genre_ids VARCHAR(255),
    IN p_subject_ids VARCHAR(255)
)
BEGIN
    DECLARE v_book_id INT;
    DECLARE current_id INT;
    DECLARE remaining_ids TEXT;
    DECLARE comma_pos INT;
    
    
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        SET @allow_book_insert = NULL; 
        ROLLBACK;
        RESIGNAL;
    END;

    
    SELECT book_id INTO v_book_id
    FROM Book
    WHERE title = p_title AND author_id = p_author_id
    LIMIT 1;

    START TRANSACTION;

    IF v_book_id IS NOT NULL THEN
        
        UPDATE Book
        SET 
            rank = p_rank,
            year = p_year,
            pages = p_pages,
            avg_rating = p_avg_rating,
            type_id = p_type_id,
            length_id = p_length_id,
            country_id = p_country_id
        WHERE book_id = v_book_id;

        
        DELETE FROM BookLanguages WHERE book_id = v_book_id;
        DELETE FROM BookGenres WHERE book_id = v_book_id;
        DELETE FROM BookSubjects WHERE book_id = v_book_id;

    ELSE
        
        SET @allow_book_insert = 1;

        INSERT INTO Book(rank, title, year, pages, avg_rating, type_id, length_id, author_id, country_id)
        VALUES(p_rank, p_title, p_year, p_pages, p_avg_rating, p_type_id, p_length_id, p_author_id, p_country_id);
        
        SET @allow_book_insert = NULL;
        
        SET v_book_id = LAST_INSERT_ID();
    END IF;
    
    IF p_language_ids IS NOT NULL AND p_language_ids != '' THEN
        SET remaining_ids = CONCAT(p_language_ids, ',');
        WHILE LENGTH(remaining_ids) > 0 DO
            SET comma_pos = LOCATE(',', remaining_ids);
            IF comma_pos > 0 THEN
                SET current_id = CAST(TRIM(SUBSTRING(remaining_ids, 1, comma_pos - 1)) AS UNSIGNED);
                IF current_id > 0 THEN
                    INSERT INTO BookLanguages(book_id, language_id) VALUES(v_book_id, current_id);
                END IF;
                SET remaining_ids = SUBSTRING(remaining_ids, comma_pos + 1);
            ELSE
                SET remaining_ids = '';
            END IF;
        END WHILE;
    END IF;

    
    IF p_genre_ids IS NOT NULL AND p_genre_ids != '' THEN
        SET remaining_ids = CONCAT(p_genre_ids, ',');
        WHILE LENGTH(remaining_ids) > 0 DO
            SET comma_pos = LOCATE(',', remaining_ids);
            IF comma_pos > 0 THEN
                SET current_id = CAST(TRIM(SUBSTRING(remaining_ids, 1, comma_pos - 1)) AS UNSIGNED);
                IF current_id > 0 THEN
                    INSERT INTO BookGenres(book_id, genre_id) VALUES(v_book_id, current_id);
                END IF;
                SET remaining_ids = SUBSTRING(remaining_ids, comma_pos + 1);
            ELSE
                SET remaining_ids = '';
            END IF;
        END WHILE;
    END IF;
    
    
    IF p_subject_ids IS NOT NULL AND p_subject_ids != '' THEN
        SET remaining_ids = CONCAT(p_subject_ids, ',');
        WHILE LENGTH(remaining_ids) > 0 DO
            SET comma_pos = LOCATE(',', remaining_ids);
            IF comma_pos > 0 THEN
                SET current_id = CAST(TRIM(SUBSTRING(remaining_ids, 1, comma_pos - 1)) AS UNSIGNED);
                IF current_id > 0 THEN
                    INSERT INTO BookSubjects(book_id, subject_id) VALUES(v_book_id, current_id);
                END IF;
                SET remaining_ids = SUBSTRING(remaining_ids, comma_pos + 1);
            ELSE
                SET remaining_ids = '';
            END IF;
        END WHILE;
    END IF;

    COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*M!100616 SET NOTE_VERBOSITY=@OLD_NOTE_VERBOSITY */;

-- Dump completed on 2025-08-06 20:45:31
